diff --git a/node_modules/hardhat/internal/hardhat-network/stack-traces/solidity-errors.js b/node_modules/hardhat/internal/hardhat-network/stack-traces/solidity-errors.js
index 8f5bd22..9993837 100644
--- a/node_modules/hardhat/internal/hardhat-network/stack-traces/solidity-errors.js
+++ b/node_modules/hardhat/internal/hardhat-network/stack-traces/solidity-errors.js
@@ -108,10 +108,14 @@ function encodeStackTraceEntry(stackTraceEntry) {
     }
 }
 function sourceReferenceToSolidityCallsite(sourceReference) {
+    if (!sourceReference) {
+        return new SolidityCallSite("UnknownFile", "UnknownContract", solidity_stack_trace_1.UNKNOWN_FUNCTION_NAME, 0);
+    }
     return new SolidityCallSite(sourceReference.sourceName, sourceReference.contract, sourceReference.function !== undefined
         ? sourceReference.function
         : solidity_stack_trace_1.UNKNOWN_FUNCTION_NAME, sourceReference.line);
 }
+
 function getMessageFromLastStackTraceEntry(stackTraceEntry) {
     switch (stackTraceEntry.type) {
         case solidity_stack_trace_1.StackTraceEntryType.PRECOMPILE_ERROR:
